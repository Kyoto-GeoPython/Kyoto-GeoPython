<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>文字列操作（１）数値を文字列にフォーマットする</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-115860818-2"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-115860818-2");
    </script>

    <link rel="stylesheet" type="text/css" href="/css/nb-000.css" />
    <link rel="stylesheet" type="text/css" href="/css/nb-001.css" />
    <link rel="stylesheet" type="text/css" href="/css/nb-002.css" />

    <link rel="stylesheet" href="/css/w3.css" />
    <link rel="stylesheet" type="text/css" href="/css/nb-base.css" />

    <!-- Loading mathjax macro -->
    <!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"] ],
              displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
              processEscapes: true,
              processEnvironments: true
          },
          // Center justify equations in code and markdown cells. Elsewhere
          // we use CSS to left justify single line equations in code cells.
          displayAlign: 'center',
          "HTML-CSS": {
              styles: {'.MathJax_Display': {"margin": 0}},
              linebreaks: { automatic: true }
          }
      });
    </script>
    <!-- End of mathjax configuration -->
  </head>
  <body>
      <div class="top-button-container">
        <div class="w3-panel w3-left">
          <h4><a class="w3-button w3-black" href="/">トップページに戻る</a></h4>
        </div>
      </div>

    <div tabindex="-1" id="notebook" class="border-box-sizing must-no-padding">
      <div class="container my-notebook-container must-no-padding" id="notebook-container">
        <div class="w3-panel">
          <h1 class="w3-center">文字列操作（１）数値を文字列にフォーマットする</h1>
        </div>

        <div class="w3-container w3-padding-small"><div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>本記事では、Python3.6以降で導入された機能も紹介しています。<br>
特別な理由がなければ、Python3.6以降の新しいバージョンを使用することをおすすめします。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#30446;&#27425;">&#30446;&#27425;<a class="anchor-link" href="#&#30446;&#27425;">&#182;</a></h1><ul>
<li>Pythonにおける文字列（string型）</li>
<li>文字列の結合<ul>
<li>+を使った結合</li>
<li>str.format関数<ul>
<li>基本的な使い方</li>
<li>（気になる人向け）書式指定子の構造</li>
</ul>
</li>
<li>f-string</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Python&#12395;&#12362;&#12369;&#12427;&#25991;&#23383;&#21015;&#65288;string&#22411;&#65289;">Python&#12395;&#12362;&#12369;&#12427;&#25991;&#23383;&#21015;&#65288;string&#22411;&#65289;<a class="anchor-link" href="#Python&#12395;&#12362;&#12369;&#12427;&#25991;&#23383;&#21015;&#65288;string&#22411;&#65289;">&#182;</a></h1><p>Pythonで文字列を扱うための組み込みクラスとして、<strong>string</strong>という型があります。別の言い方として、<strong>文字列型</strong>や<strong>str</strong>などと呼ばれることもあります。<br>
大概の文字列操作はこのクラスだけで出来ちゃうので、マスターするとファイル入出力などで困ることがぐっと減ります。数値をフォーマットして文字列に変換したり、必要な部分を抜き出したり、特定文字を区切り文字として複数の文字列に分割したりと多機能なクラスです。<br>
文字列は"（ダブルクォーテーション）もしくは'（シングルクォーテーション）で囲むことで作れます（２つの違いはまったくない）。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
<span class="c1"># s = &#39;hello&#39; &lt;-- これでもよい</span>
<span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>str</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Cでの<strong>char</strong>やFortranでの<strong>character</strong>と違い、文字そのものも長さが１の文字列として扱います。事前に配列を定義する必要があったり、結合しているうちに最初に定義した配列サイズを超えるといったことはなく、直感的な操作が可能です。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#25991;&#23383;&#21015;&#12398;&#32080;&#21512;">&#25991;&#23383;&#21015;&#12398;&#32080;&#21512;<a class="anchor-link" href="#&#25991;&#23383;&#21015;&#12398;&#32080;&#21512;">&#182;</a></h1><h2 id="+&#35352;&#21495;&#12434;&#20351;&#12387;&#12383;&#25991;&#23383;&#21015;&#12398;&#32080;&#21512;">+&#35352;&#21495;&#12434;&#20351;&#12387;&#12383;&#25991;&#23383;&#21015;&#12398;&#32080;&#21512;<a class="anchor-link" href="#+&#35352;&#21495;&#12434;&#20351;&#12387;&#12383;&#25991;&#23383;&#21015;&#12398;&#32080;&#21512;">&#182;</a></h2><p>多くのスクリプト言語と同様に、文字列を結合するためには<strong>+</strong>記号を使います。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># +記号を使った文字列の結合</span>
<span class="s2">&quot;hello&quot;</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="s2">&quot;world&quot;</span> <span class="c1"># --&gt; &#39;hello,world&#39;</span>

<span class="c1"># +を使わずこんな結合もできる</span>
<span class="s2">&quot;hello&quot;&quot;,&quot;&quot;world&quot;</span> <span class="c1"># --&gt; &#39;hello,world&#39;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;hello,world&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ここで一つ注意しなければならないのは、<strong>int</strong>や<strong>float</strong>といった数値の型はstring型と「＋」を用いた結合ができないということです。数値をstring型と結合するためには、数値をstring型に明示的にキャスト（型の変換）する必要があります。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 1 + &quot;a&quot;　#TypeError</span>
<span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;a&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;1a&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>このような少し面倒な仕様になっているのは、意図していない結合をした場合に必ずエラーが出るようにするためです。<br>
CやFortranのように型を事前に指定して変数を定義するコンパイル言語と違い、Pythonを始めとしたスクリプト言語では、変数に異なる型を代入できるために、間違った型を入れたままコードを書いてしまうことがあります。<br>
一例を上げると、</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num1</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">num2</span> <span class="o">=</span> <span class="s2">&quot;3&quot;</span> <span class="c1">#ファイルからの読み取りの際、stringのままに変数に保存</span>
<span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span> <span class="c1">#TypeError</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-5-63084913d688&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-intense-fg ansi-bold">()</span>
<span class="ansi-green-fg">      1</span> num1 <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-cyan-intense-fg ansi-bold">1</span>
<span class="ansi-green-fg">      2</span> num2 <span class="ansi-yellow-intense-fg ansi-bold">=</span> <span class="ansi-blue-intense-fg ansi-bold">&#34;3&#34;</span> <span class="ansi-red-intense-fg ansi-bold">#ファイルからの読み取りの際、stringのままに変数に保存</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 3</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>num1 <span class="ansi-yellow-intense-fg ansi-bold">+</span> num2 <span class="ansi-red-intense-fg ansi-bold">#TypeError</span>

<span class="ansi-red-intense-fg ansi-bold">TypeError</span>: unsupported operand type(s) for +: &#39;int&#39; and &#39;str&#39;</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>このコードを書いた人は最後の行では何をしようとしたのでしょうか？可能性は２つあります。</p>
<ul>
<li>num1, num2のどちらも<strong>string</strong>だと思って計算し、出力では「13」を出そうとした</li>
<li>num1, num2のどちらも<strong>int</strong>だと思って計算し、出力では「4」を出そうとした</li>
</ul>
<p>もちろん、Pythonのインタプリタ（コードを一行ごと読み込んで実行するもの）はどちらが本来意図されていたかを知る由もないのでエラーを吐き出すわけです。<br>
この面倒な仕様は、スクリプト言語の宿命とも言える産物なのです。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="str.format&#38306;&#25968;">str.format&#38306;&#25968;<a class="anchor-link" href="#str.format&#38306;&#25968;">&#182;</a></h2><p>上記のような宿命は納得したとしても、さすがに毎回キャストするのは面倒です。
２つの文字列を結合するぐらいならキャストでいいかもしれませんが、大抵の場合、もっと多くの文字列を結合したいはずなので、これを簡単にする関数として<strong>str.format</strong>が用意されています。<br>
複数の文字列、数値などを連結する場合に非常によく使います。特に、科学技術計算などで数値をフォーマット（桁数を指定するなど）する際に役立ちます。<br>
生の文字列もstringなので、実は関数を呼び出すことができ、format関数を使うときには大抵このように記述します。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="s2">&quot;正の整数で一番小さいものは、「</span><span class="si">{}</span><span class="s2">」&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;正の整数で一番小さいものは、「1」&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>基本的にformat関数は、文字列中の「{ }」の場所に、引数をstringにキャストして埋め込むという機能を持ちます。<br>
formatの引数は複数入れることも可能で、その場合、引数の個数に対応した「{}」を文字列の中に含んでいなければなりません。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num1</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">num2</span> <span class="o">=</span> <span class="mi">3</span>
<span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> + </span><span class="si">{}</span><span class="s2"> = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">,</span> <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;1 + 3 = 4&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#「{ }」の中に埋め込みたい引数の位置を明示的に番号で与えることもできる</span>
<span class="c1"># 引数のタプルのインデックスを指定している</span>
<span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2"> </span><span class="si">{2}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;一個目&quot;</span><span class="p">,</span><span class="s2">&quot;二個目&quot;</span><span class="p">,</span><span class="s2">&quot;三個目&quot;</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;一個目 二個目 三個目 二個目&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#リストを展開して文字列に入れたい場合。「＊」でリストをばらして引数にできる。</span>
<span class="n">greetings</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;こんにちは&quot;</span><span class="p">,</span> <span class="s2">&quot;ニーハオ&quot;</span><span class="p">]</span>
<span class="s2">&quot;</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">greetings</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;hello, こんにちは, ニーハオ&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#floatを入れた場合</span>
<span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;0.3333333333333333&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#キーワード引数で可読性を上げる</span>
<span class="s2">&quot;</span><span class="si">{arg1}</span><span class="s2"> </span><span class="si">{arg2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">arg1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">arg2</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;1 100&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>注：{ } の数字やキーワードを省略した場合、文字列の中に出てくる { } に0, 1, 2,…と番号をつけていくという処理が行われています。</p>
<h3 id="&#26360;&#24335;&#25351;&#23450;&#23376;">&#26360;&#24335;&#25351;&#23450;&#23376;<a class="anchor-link" href="#&#26360;&#24335;&#25351;&#23450;&#23376;">&#182;</a></h3><p>細かいフォーマットの指定は { } の中に<strong>書式指定子</strong>を入れることで可能です。</p>
<blockquote><p><strong>フォーマットの構造　：　{ [引数の指定] : [書式指定子] }</strong></p>
</blockquote>
<p>"{○:△}"の○部分で引数の指定（上記の0,1やarg1など）を行い、△の部分に書式指定子を書きます。○の部分を省略した場合（書式指定子のみを書く場合）、<strong>"{:△}"</strong>と書きます（コロンは省略できません）。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#小数点以下2桁まで表示</span>
<span class="s2">&quot;</span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">123.4567</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;123.46&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#指数表示</span>
<span class="s2">&quot;</span><span class="si">{:.2e}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">123.4567</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;1.23e+02&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#指数表示</span>
<span class="s2">&quot;</span><span class="si">{:.3e}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">123.4567</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;1.235e+02&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#符号も含め全体で6文字、小数点以下は1桁まで表示</span>
<span class="s2">&quot;</span><span class="si">{:6.1f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">12.34</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39; -12.3&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#符号も含め全体で12文字、小数点以下は2桁まで表示（空白埋め）</span>
<span class="s2">&quot;</span><span class="si">{:12.2e}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">12.3456</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;   -1.23e+01&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#符号を前に出したい場合は、width（幅）の前に&quot;0&quot;をつける</span>
<span class="s2">&quot;</span><span class="si">{:08}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">12.34</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;-0012.34&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#空白埋めの場合はデフォルトにして幅だけ決めれば良い</span>
<span class="s2">&quot;</span><span class="si">{:8}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">12.34</span><span class="p">)</span>  <span class="c1"># --&gt; &#39;  -12.34&#39;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;  -12.34&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#これをベースに小数点以下の桁数などを変更する</span>
<span class="s2">&quot;</span><span class="si">{:06.1f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">12.34</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;-012.3&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#別の文字で埋めたい場合はこうすると良い</span>
<span class="s2">&quot;</span><span class="si">{:*&gt;8}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mf">12.34</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;**-12.34&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#整数（空白埋め）</span>
<span class="s2">&quot;</span><span class="si">{:6}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mi">123</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[21]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;  -123&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#整数（ゼロ埋め）</span>
<span class="s2">&quot;</span><span class="si">{:06}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="mi">123</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;-00123&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="f-string">f-string<a class="anchor-link" href="#f-string">&#182;</a></h2><p>Python3.6から<strong>f-string</strong>という記法が新しく導入されました。<br>
これは、上述のformat関数を毎回呼ばないといけず、記述がエレガントでない、という理由で生まれました。<br>
通常の文字列の最初に <strong>f</strong> をつけるだけで<strong>f-string</strong>を使うことができます。<br>
使い方は<strong>str.format</strong>とほとんど変わりませんが、 <strong>{ }</strong> の中に変数を埋め込むことができます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">6</span>
<span class="sa">f</span><span class="s2">&quot;My favorite number is </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">.&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;My favorite number is 6.&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 書式指定子もstr.formatと同じものが使用できる</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">3.141592</span><span class="p">,</span> <span class="mf">3.05</span>
<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> is much larger than </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">.&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[24]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;3.14 is much larger than 3.05.&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># {}内はインラインで実行される</span>
<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[25]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;6&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># リストの要素を以下のように取り出せる</span>
<span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mylist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">mylist</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">mylist</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[26]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;6 + 4 = 10&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Python3.6で導入されたこの<strong>f-string</strong>は非常に便利であり、それだけでもバージョンアップする価値があるかと思います。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="&#65288;&#27671;&#12395;&#12394;&#12427;&#20154;&#21521;&#12369;&#65289;&#26360;&#24335;&#25351;&#23450;&#23376;&#12398;&#27083;&#36896;">&#65288;&#27671;&#12395;&#12394;&#12427;&#20154;&#21521;&#12369;&#65289;&#26360;&#24335;&#25351;&#23450;&#23376;&#12398;&#27083;&#36896;<a class="anchor-link" href="#&#65288;&#27671;&#12395;&#12394;&#12427;&#20154;&#21521;&#12369;&#65289;&#26360;&#24335;&#25351;&#23450;&#23376;&#12398;&#27083;&#36896;">&#182;</a></h4><p>書式指定子は指定する順番によってどれを指定するかが変わります。<br>
少々分かりにくいですが、公式HPより一般的な書式指定子の書き方を引用してみます。</p>
<blockquote><p>[ [fill] align] [sign] [#] [0] [width] [.precision] [type]</p>
</blockquote>
<p>以下に、指定子をまとめた表を載せます。
利用可能なオプションの詳細は<a href="https://docs.python.jp/3/library/string.html#format-specification-mini-language">公式HP</a>で確認してください。<br>
おすすめの部分は、数値をフォーマットする場合を前提として書いています。</p>
<table>
<thead><tr>
<th style="text-align:center">指定子名</th>
<th style="text-align:center">利用可能なオプション</th>
<th style="text-align:center">意味</th>
<th style="text-align:center">デフォルト</th>
<th style="text-align:center">おすすめ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">fill</td>
<td style="text-align:center">任意の文字</td>
<td style="text-align:center">空白部分に埋める文字の指定<br>（alignとセット）</td>
<td style="text-align:center">" "（空白部分はスペースで埋める）</td>
<td style="text-align:center">デフォルト</td>
</tr>
<tr>
<td style="text-align:center">align</td>
<td style="text-align:center">"&lt;", "&gt;", "=", "^"</td>
<td style="text-align:center">左詰めや右詰めなどの指定</td>
<td style="text-align:center">数値なら右詰め、stringなら左詰め</td>
<td style="text-align:center">同上</td>
</tr>
<tr>
<td style="text-align:center">sign</td>
<td style="text-align:center">"+", "-", " "</td>
<td style="text-align:center">符号の表示の仕方</td>
<td style="text-align:center">"-"（負数のみ符号を表示）</td>
<td style="text-align:center">同上</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">なし、"0"</td>
<td style="text-align:center">"0"にした場合、符号を前につけ、その間を0埋め</td>
<td style="text-align:center">なし</td>
<td style="text-align:center">0埋めしたい場合はこれのみ指定</td>
</tr>
<tr>
<td style="text-align:center">#</td>
<td style="text-align:center">なし, "#"</td>
<td style="text-align:center">16進数のとき0xをつけるかどうかなどの指定</td>
<td style="text-align:center">""（デフォルトでなし）</td>
<td style="text-align:center">デフォルト</td>
</tr>
<tr>
<td style="text-align:center">width</td>
<td style="text-align:center">整数</td>
<td style="text-align:center">全体幅の指定（幅より大きい数値ならばそれが収まるような全体幅に自動で変わる</td>
<td style="text-align:center">収まるような幅</td>
<td style="text-align:center">小さく取ると勝手に大きくなるので、あらかじめ大きめに取っておく</td>
</tr>
<tr>
<td style="text-align:center">.precision</td>
<td style="text-align:center">整数</td>
<td style="text-align:center">小数点以下の桁数の指定</td>
<td style="text-align:center">16桁くらい</td>
<td style="text-align:center">自由にどうぞ</td>
</tr>
<tr>
<td style="text-align:center">type</td>
<td style="text-align:center">"b", "d", "e", "E", "f"など</td>
<td style="text-align:center">整数や小数の表示方法<br>（指数表示とか）</td>
<td style="text-align:center">小数：固定小数点<br>整数：10進数</td>
<td style="text-align:center">"e", "E"（どちらも指数表示、"E"は1.E01のように大文字になる）もしくは "f"（固定小数点表示）</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
 

</div>
      </div>
    </div>

      <div class="w3-row-padding w3-padding-small w3-left-aligned w3-panel">
        <div class="w3-half w3-padding-small w3-container">
          <h2 class="w3-xxlarge w3-padding-small w3-blue">基礎編</h2>
          <div class="w3-row-padding bottom-links">
            <p>
              <a href="/html/基礎編/Pythonの基礎1.html">Pythonの基礎（１）</a>
            </p>
            <p>
              <a href="/html/基礎編/Pythonの基礎2.html">Pythonの基礎（２）</a>
            </p>
            <p><a href="/html/基礎編/Matplotlib.html">Matplotlib</a></p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（１）導入.html"
                >Numpyの基礎（１）導入</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（２）生成関数.html"
                >Numpyの基礎（２）生成関数</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（３）ufunc.html"
                >Numpyの基礎（３）配列に関数を作用させる</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（４）データ型.html"
                >Numpyの基礎（４）データ型（C,Fortranとの比較）</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（５）要素の参照.html"
                >Numpyの基礎（５）要素の取り出し方</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（６）ブロードキャスト.html"
                >Numpyの基礎（６）ブロードキャスト</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（７）便利なライブラリ群.html"
                >Numpyの基礎（７）線形代数やフーリエ変換</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（８）ファイル入出力.html"
                >Numpyの基礎（８）様々な形式に対応したファイル入出力</a
              >
            </p>
            <p>
              <a href="/html/基礎編/ファイル読み込み.html">ファイル読み込み</a>
            </p>
            <p>
              <a href="/html/基礎編/文字列操作（１）str.format.html"
                >文字列操作（１）数値を文字列にフォーマットする</a
              >
            </p>
            <p>
              <a href="/html/基礎編/文字列操作（２）strやファイル読み込み.html"
                >文字列操作（２）文字列に関数を適用する</a
              >
            </p>
            <p>
              <a href="/html/基礎編/読みやすいPythonコードを書こう.html"
                >読みやすいPythonコードを書こう</a
              >
            </p>
          </div>
        </div>
        <div class="w3-half w3-padding-small w3-container">
          <h2 class="w3-xxlarge w3-padding-small w3-orange">応用編</h2>
          <div class="w3-row-padding bottom-links">
            <p><a href="/html/応用編/Animation.html">Animation</a></p>
            <p>
              <a href="/html/応用編/Fortran, C言語 との連携.html"
                >Fortran, C言語 との連携</a
              >
            </p>
            <p>
              <a href="/html/応用編/Pandas―データ分析（１）Series.html"
                >Pandas ― データ分析（１）時系列などをうまく扱えるようにする</a
              >
            </p>
            <p>
              <a href="/html/応用編/Pandas―データ分析（２）DataFrame.html"
                >Pandas ― データ分析（２）複数の列を持った表形式でデータを格納する</a
              >
            </p>
            <p>
              <a href="/html/応用編/Pandas―データ分析（３）GroupBy.html"
                >Pandas ― データ分析（３）データを分割し、個別に集計する</a
              >
            </p>
            <p>
              <a href="/html/応用編/Pandas―データ分析（４）ファイル入出力.html"
                >Pandas ― データ分析（４）高度なファイル入出力</a
              >
            </p>
            <p>
              <a
                href="/html/応用編/Pandas―データ分析（５）応用：都道府県別人口推移.html"
                >Pandas ― データ分析（５）応用：都道府県別人口推移</a
              >
            </p>
            <p>
              <a
                href="/html/応用編/Seaborn ― matplotlib をより美しく、使いやすく.html"
                >Seaborn ― matplotlib をより美しく、使いやすく</a
              >
            </p>
            <p>
              <a href="/html/応用編/shやBashの代わりにPythonを使う.html"
                >shやBashの代わりにPythonを使う</a
              >
            </p>
            <p>
              <a href="/html/応用編/SymPyー代数演算（１）使い方.html"
                >SymPy ― 代数演算（１）文字を文字のまま計算する</a
              >
            </p>
            <p>
              <a href="/html/応用編/SymPyー代数演算（２）応用：二重振り子.html"
                >SymPy ―
                代数演算（２）応用：ラグランジアンから運動方程式を求めて二重振り子を解く</a
              >
            </p>
          </div>
        </div>
      </div>

      <div class="footer-button-container">
        <div class="w3-panel w3-center">
          <h4><a class="w3-button w3-black" href="/">トップページに戻る</a></h4>
        </div>
      </div>
  </body>
</html>