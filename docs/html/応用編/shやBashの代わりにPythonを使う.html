<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>shやBashの代わりにPythonを使う</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-115860818-2"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-115860818-2");
    </script>

    <link rel="stylesheet" type="text/css" href="/css/nb-000.css" />
    <link rel="stylesheet" type="text/css" href="/css/nb-001.css" />
    <link rel="stylesheet" type="text/css" href="/css/nb-002.css" />

    <link rel="stylesheet" href="/css/w3.css" />
    <link rel="stylesheet" type="text/css" href="/css/nb-base.css" />

    <!-- Loading mathjax macro -->
    <!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"] ],
              displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
              processEscapes: true,
              processEnvironments: true
          },
          // Center justify equations in code and markdown cells. Elsewhere
          // we use CSS to left justify single line equations in code cells.
          displayAlign: 'center',
          "HTML-CSS": {
              styles: {'.MathJax_Display': {"margin": 0}},
              linebreaks: { automatic: true }
          }
      });
    </script>
    <!-- End of mathjax configuration -->
  </head>
  <body>
      <div class="top-button-container">
        <div class="w3-panel w3-left">
          <h4><a class="w3-button w3-black" href="/">トップページに戻る</a></h4>
        </div>
      </div>

    <div tabindex="-1" id="notebook" class="border-box-sizing must-no-padding">
      <div class="container my-notebook-container must-no-padding" id="notebook-container">
        <div class="w3-panel">
          <h1 class="w3-center">shやBashの代わりにPythonを使う</h1>
        </div>

        <div class="w3-container w3-padding-small"><div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#30446;&#27425;">&#30446;&#27425;<a class="anchor-link" href="#&#30446;&#27425;">&#182;</a></h1><ul>
<li>はじめに</li>
<li>pwd: 作業ディレクトリのパスを表示する</li>
<li>ls: ファイルをリストする</li>
<li>cd: 作業ディレクトリを変更する</li>
<li>cp: ファイルをコピーする</li>
<li>mv: ファイルを移動する</li>
<li>rm: ファイルを消去する</li>
<li>mkdir: ディレクトリを作る</li>
<li>ファイル操作その他</li>
<li>プロセスの実行</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#12399;&#12376;&#12417;&#12395;">&#12399;&#12376;&#12417;&#12395;<a class="anchor-link" href="#&#12399;&#12376;&#12417;&#12395;">&#182;</a></h1><p>Pythonの標準ライブラリを用いると、シェルスクリプト（shやbash）と同等の操作がPython上で行えます。<br>
Pythonを用いることには次のような利点があります。</p>
<ul>
<li>Pythonの強力な文字列操作メソッドを用いられる</li>
<li>シェルスクリプトの働きとPythonのその他のライブラリ（NumPyなど）とをシームレスにつなぐことができる  </li>
</ul>
<p>特に後者は、Pythonの強みである「言語自体の汎用性とライブラリによる専門性」を表していると言えるでしょう。</p>
<p>本稿では、Pythonを用いてファイル操作を行う方法と、プロセスを実行する方法について、シェルのコマンドと対応させて簡単に紹介します。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="pwd:-&#20316;&#26989;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12398;&#12497;&#12473;&#12434;&#34920;&#31034;&#12377;&#12427;">pwd: &#20316;&#26989;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12398;&#12497;&#12473;&#12434;&#34920;&#31034;&#12377;&#12427;<a class="anchor-link" href="#pwd:-&#20316;&#26989;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12398;&#12497;&#12473;&#12434;&#34920;&#31034;&#12377;&#12427;">&#182;</a></h1><p>pwdやlsなど、多くのファイル操作コマンドは、標準ライブラリ<strong>os</strong>モジュールを通して実現されています。<br>
現在の作業ディレクトリのパスはos.getcwd()によって得られ、文字列型として返されます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">working_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="ls:-&#12501;&#12449;&#12452;&#12523;&#12434;&#12522;&#12473;&#12488;&#12377;&#12427;">ls: &#12501;&#12449;&#12452;&#12523;&#12434;&#12522;&#12473;&#12488;&#12377;&#12427;<a class="anchor-link" href="#ls:-&#12501;&#12449;&#12452;&#12523;&#12434;&#12522;&#12473;&#12488;&#12377;&#12427;">&#182;</a></h1><p>ls <em>path</em> は os.listdir(<em>path</em>) で、<em>path</em>におけるファイルなどを、文字列のリストとして返してくれます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&#39;c02.csv&#39;,
 &#39;Sample.gif&#39;,
 &#39;c01.csv&#39;,
 &#39;Pandas\u3000―\u3000データ分析.ipynb&#39;,
 &#39;Pandas―データ分析（３）GroupBy.ipynb&#39;,
 &#39;Seaborn ― matplotlib をより美しく、使いやすく.ipynb&#39;,
 &#39;libsobol.c&#39;,
 &#39;Fortran, C言語 との連携.ipynb&#39;,
 &#39;RK4.f90&#39;,
 &#39;Pandas―データ分析（５）応用：都道府県別人口推移.ipynb&#39;,
 &#39;RK4_f2py.f90&#39;,
 &#39;Pandas―データ分析（４）ファイル入出力.ipynb&#39;,
 &#39;double_pendulum.gif&#39;,
 &#39;SymPyー代数演算（２）応用：二重振り子.ipynb&#39;,
 &#39;Pandas―データ分析（１）Series.ipynb&#39;,
 &#39;.ipynb_checkpoints&#39;,
 &#39;SymPyー代数演算（１）使い方.ipynb&#39;,
 &#39;shやBashの代わりにPythonを使う.ipynb&#39;,
 &#39;use_RK4.py&#39;,
 &#39;SymPyー代数演算.ipynb&#39;,
 &#39;Pandas―データ分析（２）DataFrame.ipynb&#39;,
 &#39;Animation.ipynb&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>os.listdirでは、任意の1文字を表す ? や任意の文字 * などのワイルドカード、または正規表現を使うことができません。<br>
ワイルドカードや正規表現を用いて特定のファイル名のみをリストしたいときは、標準ライブラリの<strong>glob</strong>を用います。<br>
glob.glob(<em>path</em>)で、<em>path</em>に一致するファイルをリストとして抽出できます。ただし、os.listdirと異なり、ファイル名でなくそのパスを返していることに気をつけましょう。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">glob</span>
<span class="n">ls2</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;./*.ipynb&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">ls2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>./Pandas　―　データ分析.ipynb
./Pandas―データ分析（３）GroupBy.ipynb
./Seaborn ― matplotlib をより美しく、使いやすく.ipynb
./Fortran, C言語 との連携.ipynb
./Pandas―データ分析（５）応用：都道府県別人口推移.ipynb
./Pandas―データ分析（４）ファイル入出力.ipynb
./SymPyー代数演算（２）応用：二重振り子.ipynb
./Pandas―データ分析（１）Series.ipynb
./SymPyー代数演算（１）使い方.ipynb
./shやBashの代わりにPythonを使う.ipynb
./SymPyー代数演算.ipynb
./Pandas―データ分析（２）DataFrame.ipynb
./Animation.ipynb
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#20877;&#24112;&#30340;&#12394;&#12501;&#12449;&#12452;&#12523;&#12522;&#12473;&#12488;&#21270;">&#20877;&#24112;&#30340;&#12394;&#12501;&#12449;&#12452;&#12523;&#12522;&#12473;&#12488;&#21270;<a class="anchor-link" href="#&#20877;&#24112;&#30340;&#12394;&#12501;&#12449;&#12452;&#12523;&#12522;&#12473;&#12488;&#21270;">&#182;</a></h2><p><code>glob.glob()</code> 関数に <code>recursive=True</code> を与えてやると再帰的にファイル検索をします。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;../**/*.ipynb&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&#39;../スライド/1日目スライド.ipynb&#39;,
 &#39;../応用編/Pandas\u3000―\u3000データ分析.ipynb&#39;,
 &#39;../応用編/Pandas―データ分析（３）GroupBy.ipynb&#39;,
 &#39;../応用編/Seaborn ― matplotlib をより美しく、使いやすく.ipynb&#39;,
 &#39;../応用編/Fortran, C言語 との連携.ipynb&#39;,
 &#39;../応用編/Pandas―データ分析（５）応用：都道府県別人口推移.ipynb&#39;,
 &#39;../応用編/Pandas―データ分析（４）ファイル入出力.ipynb&#39;,
 &#39;../応用編/SymPyー代数演算（２）応用：二重振り子.ipynb&#39;,
 &#39;../応用編/Pandas―データ分析（１）Series.ipynb&#39;,
 &#39;../応用編/SymPyー代数演算（１）使い方.ipynb&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="pathlib:-&#20877;&#24112;&#30340;&#12394;&#12501;&#12449;&#12452;&#12523;&#19968;&#35239;">pathlib: &#20877;&#24112;&#30340;&#12394;&#12501;&#12449;&#12452;&#12523;&#19968;&#35239;<a class="anchor-link" href="#pathlib:-&#20877;&#24112;&#30340;&#12394;&#12501;&#12449;&#12452;&#12523;&#19968;&#35239;">&#182;</a></h1><p>さらに高機能なPath操作をしたい場合は、<strong>pathlib</strong>ライブラリが便利です。<br>
<strong>Path</strong>オブジェクトでディレクトリを指定し、<strong>glob</strong>関数をワイルドカードとともに呼び出すと、サブディレクトリまで再帰的にファイルを検索します。Pathオブジェクトはイテレータになっているため、最初から全部のファイルを探すのではなく、forループごとに次のファイルへ進んでいきます。普通にリストが欲しい場合は、<code>list(path.glob('xxxx'))</code>を呼び出してください。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Pathオブジェクト(ここでは、一つ上のディレクトリを基準に作る)</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>

<span class="c1">#  再帰的にサブディレクトリ内の &#39;.ipynb&#39;ファイルを全て列挙する</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;**/*.ipynb&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>../スライド/1日目スライド.ipynb
../応用編/Pandas　―　データ分析.ipynb
../応用編/Pandas―データ分析（３）GroupBy.ipynb
../応用編/Seaborn ― matplotlib をより美しく、使いやすく.ipynb
../応用編/Fortran, C言語 との連携.ipynb
../応用編/Pandas―データ分析（５）応用：都道府県別人口推移.ipynb
../応用編/Pandas―データ分析（４）ファイル入出力.ipynb
../応用編/SymPyー代数演算（２）応用：二重振り子.ipynb
../応用編/Pandas―データ分析（１）Series.ipynb
../応用編/SymPyー代数演算（１）使い方.ipynb
../応用編/shやBashの代わりにPythonを使う.ipynb
../応用編/SymPyー代数演算.ipynb
../応用編/Pandas―データ分析（２）DataFrame.ipynb
../応用編/Animation.ipynb
../応用編/.ipynb_checkpoints/shやBashの代わりにPythonを使う-checkpoint.ipynb
../ライブラリ集/Sympy―代数演算.ipynb
../基礎編/Numpyを使う際の注意点.ipynb
../基礎編/Numpyの基礎（１）導入.ipynb
../基礎編/Numpyの基礎（７）便利なライブラリ群.ipynb
../基礎編/Matplotlib.ipynb
../基礎編/Numpyの基礎（４）データ型.ipynb
../基礎編/Numpyの基礎（６）ブロードキャスト.ipynb
../基礎編/Pythonの基礎2.ipynb
../基礎編/文字列操作（１）str.format.ipynb
../基礎編/Numpyの基礎（８）ファイル入出力.ipynb
../基礎編/Numpyの基礎（５）要素の参照.ipynb
../基礎編/numpy（基礎編）.ipynb
../基礎編/文字列操作（２）strやファイル読み込み.ipynb
../基礎編/Pythonの基礎1.ipynb
../基礎編/Numpyの基礎（３）ufunc.ipynb
../基礎編/ファイル読み込み.ipynb
../基礎編/Numpyの基礎（２）生成関数.ipynb
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>より詳細な情報は、<a href="https://docs.python.org/ja/3/library/pathlib.html">pathlib公式ドキュメント</a>を参照してください。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="cd:-&#20316;&#26989;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#22793;&#26356;&#12377;&#12427;">cd: &#20316;&#26989;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#22793;&#26356;&#12377;&#12427;<a class="anchor-link" href="#cd:-&#20316;&#26989;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#22793;&#26356;&#12377;&#12427;">&#182;</a></h1><p>cd <em>path</em> は os.chdir(<em>path</em>) です。<br>
Python上での作業ディレクトリの変更は、Pythonのセッションが終了するまで（IPythonなどを閉じるまで）有効です。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;../基礎編&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="mkdir:-&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#20316;&#12427;">mkdir: &#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#20316;&#12427;<a class="anchor-link" href="#mkdir:-&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#20316;&#12427;">&#182;</a></h1><p>mkdir <em>dirname</em> は os.makedirs(<em>dirname</em>) です。</p>
<p><code>os.mkdir</code> もありますが、再帰的にディレクトリを作る時に少し面倒なので、 <code>os.makedirs</code> を使うと良いです。</p>
<p>参照： <a href="https://note.nkmk.me/python-os-mkdir-makedirs/">Pythonでディレクトリ（フォルダ）を作成するmkdir, makedirs</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s1">&#39;./new-dir&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s1">&#39;./new-dir/dep1/dep2/dep3&#39;</span><span class="p">)</span>

<span class="c1"># os.mkdir(&#39;./new-dir/dep1/dep2/dep3&#39;) はエラー</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#12501;&#12449;&#12452;&#12523;&#12539;&#12501;&#12457;&#12523;&#12480;&#12364;&#23384;&#22312;&#12375;&#12390;&#12356;&#12427;&#12363;&#30906;&#12363;&#12417;&#12427;">&#12501;&#12449;&#12452;&#12523;&#12539;&#12501;&#12457;&#12523;&#12480;&#12364;&#23384;&#22312;&#12375;&#12390;&#12356;&#12427;&#12363;&#30906;&#12363;&#12417;&#12427;<a class="anchor-link" href="#&#12501;&#12449;&#12452;&#12523;&#12539;&#12501;&#12457;&#12523;&#12480;&#12364;&#23384;&#22312;&#12375;&#12390;&#12356;&#12427;&#12363;&#30906;&#12363;&#12417;&#12427;">&#182;</a></h1><p><code>os.path.exists</code> 関数を使います。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;new-dir&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="cp:-&#12501;&#12449;&#12452;&#12523;&#12434;&#12467;&#12500;&#12540;&#12377;&#12427;">cp: &#12501;&#12449;&#12452;&#12523;&#12434;&#12467;&#12500;&#12540;&#12377;&#12427;<a class="anchor-link" href="#cp:-&#12501;&#12449;&#12452;&#12523;&#12434;&#12467;&#12500;&#12540;&#12377;&#12427;">&#182;</a></h1><p>cpやmvなどのコマンドは<strong>shutil</strong>モジュールによって提供されています。<br>
cp <em>src</em> <em>dst</em>  は shutil.copy(<em>src</em>, <em>dst</em>) です。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">shutil</span>
<span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;./*.f90&quot;</span><span class="p">))</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;write_binary.f90&quot;</span><span class="p">,</span> <span class="s2">&quot;copied_write_binary.f90&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;./*.f90&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;./write_binary.f90&#39;]
[&#39;./copied_write_binary.f90&#39;, &#39;./write_binary.f90&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>また、ディレクトリまるごとのコピー（cp -r）は、 shutil.copytree(<em>src</em>, <em>dst</em>) です。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="mv:-&#12501;&#12449;&#12452;&#12523;&#12434;&#31227;&#21205;&#12377;&#12427;">mv: &#12501;&#12449;&#12452;&#12523;&#12434;&#31227;&#21205;&#12377;&#12427;<a class="anchor-link" href="#mv:-&#12501;&#12449;&#12452;&#12523;&#12434;&#31227;&#21205;&#12377;&#12427;">&#182;</a></h1><p>mv <em>src</em> <em>dst</em> は shutil.move(<em>src</em>,<em>dst</em>) です。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;./*.f90&quot;</span><span class="p">))</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="s2">&quot;copied_write_binary.f90&quot;</span><span class="p">,</span> <span class="s2">&quot;moved_write_binary.f90&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;./*.f90&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;./copied_write_binary.f90&#39;, &#39;./write_binary.f90&#39;]
[&#39;./moved_write_binary.f90&#39;, &#39;./write_binary.f90&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="rm:-&#12501;&#12449;&#12452;&#12523;&#12434;&#28040;&#21435;&#12377;&#12427;">rm: &#12501;&#12449;&#12452;&#12523;&#12434;&#28040;&#21435;&#12377;&#12427;<a class="anchor-link" href="#rm:-&#12501;&#12449;&#12452;&#12523;&#12434;&#28040;&#21435;&#12377;&#12427;">&#182;</a></h1><p>rm <em>path</em> は os.remove(<em>path</em>) です。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;./*.f90&quot;</span><span class="p">))</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;moved_write_binary.f90&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;./*.f90&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;./moved_write_binary.f90&#39;, &#39;./write_binary.f90&#39;]
[&#39;./write_binary.f90&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#12501;&#12457;&#12523;&#12480;&#12434;&#21066;&#38500;&#12377;&#12427;">&#12501;&#12457;&#12523;&#12480;&#12434;&#21066;&#38500;&#12377;&#12427;<a class="anchor-link" href="#&#12501;&#12457;&#12523;&#12480;&#12434;&#21066;&#38500;&#12377;&#12427;">&#182;</a></h1><p><code>os.rmdir()</code> 関数を使います。空でないとエラーが出ます。</p>
<p>フォルダ内のファイルも丸ごと削除したいときは、 <code>shutil.rmtree()</code> 関数を使います。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="s1">&#39;new-dir/dep1/dep2/dep3&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;new-dir/dep1/dep2/dep3&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s1">&#39;new-dir&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#12501;&#12449;&#12452;&#12523;&#25805;&#20316;&#12381;&#12398;&#20182;">&#12501;&#12449;&#12452;&#12523;&#25805;&#20316;&#12381;&#12398;&#20182;<a class="anchor-link" href="#&#12501;&#12449;&#12452;&#12523;&#25805;&#20316;&#12381;&#12398;&#20182;">&#182;</a></h1><p>osのサブモジュール<strong>path</strong>は、パスの操作に便利な関数を提供しています。</p>
<p>os.path.exists(<em>path</em>) <em>path</em>で表されるファイル・ディレクトリが存在していればTrue、存在していなければFalseを返す。<br>
os.path.isdir(<em>path</em>) <em>path</em>がディレクトリならばTrue、ファイルやシンボリックリンクならばFalseを返す。<br>
os.path.isfile(<em>path</em>) <em>path</em>がファイルならばTrue、ディレクトリやシンボリックリンクならばFalseを返す。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;../**&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;is_dir = </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="si">}</span><span class="s1"> :  is_path = </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>is_dir = True :  is_path = False
is_dir = True :  is_path = False
is_dir = False :  is_path = True
is_dir = False :  is_path = True
is_dir = True :  is_path = False
is_dir = False :  is_path = True
is_dir = False :  is_path = True
is_dir = False :  is_path = True
is_dir = False :  is_path = True
is_dir = True :  is_path = False
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>次の2つは、パスの文字列を場所+ファイル名に分割したり、拡張子を取り出すのに使えます。<br>
<em>dir</em>, <em>file</em> = os.path.split(<em>path</em>) <em>path</em>のファイル等の場所を<em>dir</em>に、ファイル名を<em>file</em>に文字列として返す。<br>
<em>root</em>, <em>ext</em> = os.path.splitext(<em>path</em>) <em>path</em>のファイル等の拡張子を<em>ext</em>に、拡張子の手前までを<em>root</em>に文字列として返す。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#12503;&#12525;&#12475;&#12473;&#12398;&#23455;&#34892;---&#12471;&#12455;&#12523;&#12434;&#21628;&#12406;&#22580;&#21512;">&#12503;&#12525;&#12475;&#12473;&#12398;&#23455;&#34892; - &#12471;&#12455;&#12523;&#12434;&#21628;&#12406;&#22580;&#21512;<a class="anchor-link" href="#&#12503;&#12525;&#12475;&#12473;&#12398;&#23455;&#34892;---&#12471;&#12455;&#12523;&#12434;&#21628;&#12406;&#22580;&#21512;">&#182;</a></h1><p>上記のファイル操作コマンドだけでなく、Pythonからシェルを呼ぶことで任意のコマンドを実行することができます。</p>
<p><code>subprocess</code> モジュールを使いましょう( <code>os.system</code> は非推奨)。</p>
<p><a href="https://docs.python.org/ja/3/library/subprocess.html#subprocess.run">subprocess.run - 公式ドキュメント</a> によると、基本的にPythonから子プロセスを実行する場合は、 <code>subprocess.run</code> <strong>のみ</strong>を使えば良いように作られているらしいです。</p>
<p>試しに、　ディレクトリ構成をみやすく表示してくれる <code>tree</code> というプログラムを実行してみます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 表示例</span>
<span class="o">!</span> tree -L <span class="m">1</span> ../..
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-intense-fg ansi-bold">../..</span>
├── Makefile
├── README.md
├── <span class="ansi-blue-intense-fg ansi-bold">docs</span>
├── <span class="ansi-blue-intense-fg ansi-bold">resource</span>
├── <span class="ansi-blue-intense-fg ansi-bold">scripts</span>
├── <span class="ansi-blue-intense-fg ansi-bold">src</span>
└── <span class="ansi-blue-intense-fg ansi-bold">template</span>

5 directories, 2 files
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>これを <code>subprocess</code> モジュールを使って実行してみましょう。</p>
<p><code>subprocess.run</code> の引数には、空白で区切ったコマンドをリストで渡してあげます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;tree&#39;</span><span class="p">,</span> <span class="s1">&#39;../..&#39;</span><span class="p">,</span> <span class="s1">&#39;-L&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>CompletedProcess(args=[&#39;tree&#39;, &#39;../..&#39;, &#39;-L&#39;, &#39;1&#39;], returncode=0)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>CompletedProcess</code> というオブジェクトが返っており、 <code>returncode=0</code> つまりコマンドが正常終了したことがわかります。</p>
<p>標準出力や標準エラーを受け取りたいときは、 <code>capture_output=True</code> をセットしてあげます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;tree&#39;</span><span class="p">,</span> <span class="s1">&#39;../..&#39;</span><span class="p">,</span> <span class="s1">&#39;-L&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">],</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">proc</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>CompletedProcess(args=[&#39;tree&#39;, &#39;../..&#39;, &#39;-L&#39;, &#39;1&#39;], returncode=0, stdout=b&#39;../..\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 Makefile\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 README.md\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 docs\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 resource\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 scripts\n\xe2\x94\x9c\xe2\x94\x80\xe2\x94\x80 src\n\xe2\x94\x94\xe2\x94\x80\xe2\x94\x80 template\n\n5 directories, 2 files\n&#39;, stderr=b&#39;&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># proc.stdoutはバイナリなので decode してやると文字列に変換できる</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>../..
├── Makefile
├── README.md
├── docs
├── resource
├── scripts
├── src
└── template

5 directories, 2 files

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># あえてエラーを起こしてみる (tree に存在しないオプション -hoge を与えてみる)</span>
<span class="n">proc_failed</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;tree&#39;</span><span class="p">,</span> <span class="s1">&#39;-hoge&#39;</span><span class="p">],</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proc_failed</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>tree: missing argument to -o option.

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#12467;&#12510;&#12531;&#12489;&#23455;&#34892;&#32080;&#26524;&#12398;&#27161;&#28310;&#12456;&#12521;&#12540;&#12418;&#12414;&#12392;&#12417;&#12390;&#27161;&#28310;&#20986;&#21147;&#12395;&#12377;&#12427;">&#12467;&#12510;&#12531;&#12489;&#23455;&#34892;&#32080;&#26524;&#12398;&#27161;&#28310;&#12456;&#12521;&#12540;&#12418;&#12414;&#12392;&#12417;&#12390;&#27161;&#28310;&#20986;&#21147;&#12395;&#12377;&#12427;<a class="anchor-link" href="#&#12467;&#12510;&#12531;&#12489;&#23455;&#34892;&#32080;&#26524;&#12398;&#27161;&#28310;&#12456;&#12521;&#12540;&#12418;&#12414;&#12392;&#12417;&#12390;&#27161;&#28310;&#20986;&#21147;&#12395;&#12377;&#12427;">&#182;</a></h2><p><code>stdout=PIPE</code> と <code>stderr=STDOUT</code> を <code>subprocess.run</code> に渡すと、エラーも標準出力と一緒に出力されます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;tree&#39;</span><span class="p">,</span> <span class="s1">&#39;-hoge&#39;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">STDOUT</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>tree: missing argument to -o option.

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#12467;&#12510;&#12531;&#12489;&#23455;&#34892;&#32080;&#26524;&#12434;&#12501;&#12449;&#12452;&#12523;&#12395;&#20445;&#23384;&#12377;&#12427;">&#12467;&#12510;&#12531;&#12489;&#23455;&#34892;&#32080;&#26524;&#12434;&#12501;&#12449;&#12452;&#12523;&#12395;&#20445;&#23384;&#12377;&#12427;<a class="anchor-link" href="#&#12467;&#12510;&#12531;&#12489;&#23455;&#34892;&#32080;&#26524;&#12434;&#12501;&#12449;&#12452;&#12523;&#12395;&#20445;&#23384;&#12377;&#12427;">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># file objectをstdoutに渡す</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;result.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;tree&#39;</span><span class="p">,</span> <span class="s1">&#39;../..&#39;</span><span class="p">,</span> <span class="s1">&#39;-L&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">fp</span><span class="p">)</span>

<span class="o">!</span> cat result.txt
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>../..
├── Makefile
├── README.md
├── docs
├── resource
├── scripts
├── src
└── template

5 directories, 2 files
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="IPython&#12510;&#12472;&#12483;&#12463;&#12467;&#12510;&#12531;&#12489;">IPython&#12510;&#12472;&#12483;&#12463;&#12467;&#12510;&#12531;&#12489;<a class="anchor-link" href="#IPython&#12510;&#12472;&#12483;&#12463;&#12467;&#12510;&#12531;&#12489;">&#182;</a></h1><p>Jupyter notebookやIPythonコンソールのみで使える非常に便利なマジックコマンドと呼ばれるものがあります。<br>
<code>%</code>から始まるコマンド、例えば<code>%pwd</code>や<code>%cd</code>などです。実は、有名なコマンドはだいたい<code>%</code>がなくても実行できちゃいます。しかも、変数への代入もできるのでコマンドの結果を使ったプログラムを書くことができます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">my_wd</span> <span class="o">=</span> <span class="o">%</span><span class="k">pwd</span>

<span class="c1"># 他には　%cd　や %mkdir などがある</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Jupyter&#12363;&#12425;&#12471;&#12455;&#12523;&#12398;&#12467;&#12510;&#12531;&#12489;&#12381;&#12398;&#12418;&#12398;&#12434;&#21628;&#12406;">Jupyter&#12363;&#12425;&#12471;&#12455;&#12523;&#12398;&#12467;&#12510;&#12531;&#12489;&#12381;&#12398;&#12418;&#12398;&#12434;&#21628;&#12406;<a class="anchor-link" href="#Jupyter&#12363;&#12425;&#12471;&#12455;&#12523;&#12398;&#12467;&#12510;&#12531;&#12489;&#12381;&#12398;&#12418;&#12398;&#12434;&#21628;&#12406;">&#182;</a></h1><p>Jupyterからシェルのコマンドそのものを呼ぶこともできます。<br>
<code>!</code> から始まる行は、<code>!</code>以降の文字列はJupyterが起動しているOSのシェルで実行されます。<br>
コマンド実行によって標準出力に吐かれるログを変数に代入ができます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>which python
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>/Users/zawawahoge/.pyenv/versions/3.8.0/bin/python
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ちなみに<code>which</code>コマンドはプログラムバイナリの位置を教えてくれるコマンドです。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">python_location</span> <span class="o">=</span> <span class="o">!</span>which python
<span class="n">python_location</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[25]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&#39;/Users/zawawahoge/.pyenv/versions/3.8.0/bin/python&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="&#12300;!&#12301;&#12467;&#12510;&#12531;&#12489;&#12395;Python&#22793;&#25968;&#12434;&#22475;&#12417;&#36796;&#12416;">&#12300;!&#12301;&#12467;&#12510;&#12531;&#12489;&#12395;Python&#22793;&#25968;&#12434;&#22475;&#12417;&#36796;&#12416;<a class="anchor-link" href="#&#12300;!&#12301;&#12467;&#12510;&#12531;&#12489;&#12395;Python&#22793;&#25968;&#12434;&#22475;&#12417;&#36796;&#12416;">&#182;</a></h1><p>シェルコマンドにPythonの変数を埋め込みたい時ありませんか？実はこれもできます。Python変数の前に<code>$</code>をつけることで、シェルの変数のように扱えます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;基礎編&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>ls ../<span class="nv">$a</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Matplotlib.ipynb
NINO.3.csv
Numpyの基礎（３）ufunc.ipynb
Numpyの基礎（１）導入.html
Numpyの基礎（１）導入.ipynb
Numpyを使う際の注意点.ipynb
Numpyの基礎（２）生成関数.ipynb
Numpyの基礎（４）データ型.ipynb
Numpyの基礎（５）要素の参照.ipynb
Numpyの基礎（８）ファイル入出力.ipynb
Numpyの基礎（６）ブロードキャスト.ipynb
Numpyの基礎（７）便利なライブラリ群.ipynb
Pythonの基礎1.ipynb
Pythonの基礎2.ipynb
axis.png
c01.csv
ersst.v4.201702.nc
my_module.py
numpy（基礎編）.ipynb
redirected.txt
result.txt
temp
write_binary.f90
ファイル読み込み.ipynb
文字列操作（１）str.format.ipynb
文字列操作（２）strやファイル読み込み.ipynb
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>このコマンドはforループの中でも使えます。</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">langs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="s1">&#39;ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;java&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">langs</span><span class="p">:</span>
    <span class="n">path_bin</span> <span class="o">=</span> <span class="o">!</span>which <span class="nv">$lang</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">path_bin</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;/Users/zawawahoge/.pyenv/versions/3.8.0/bin/python&#39;]
[&#39;/usr/bin/ruby&#39;]
[&#39;/usr/bin/java&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ただし、<code>!</code>を使ったシェルの呼び出しはあなたの環境でしか動かない可能性があるので、他の人にプログラムを渡す場合は使ってはいけません。<br>
<strong>os</strong>などの標準ライブラリは環境依存しないように作られているので、こちらを使うようにしましょう。</p>

</div>
</div>
</div>
 

</div>
      </div>
    </div>

      <div class="w3-row-padding w3-padding-small w3-left-aligned w3-panel">
        <div class="w3-half w3-padding-small w3-container">
          <h2 class="w3-xxlarge w3-padding-small w3-blue">基礎編</h2>
          <div class="w3-row-padding bottom-links">
            <p>
              <a href="/html/基礎編/Pythonの基礎1.html">Pythonの基礎（１）</a>
            </p>
            <p>
              <a href="/html/基礎編/Pythonの基礎2.html">Pythonの基礎（２）</a>
            </p>
            <p><a href="/html/基礎編/Matplotlib.html">Matplotlib</a></p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（１）導入.html"
                >Numpyの基礎 ― 導入</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（２）生成関数.html"
                >Numpyの基礎 ― 生成関数</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（３）ufunc.html"
                >Numpyの基礎 ― 配列に関数を作用させる</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（４）データ型.html"
                >Numpyの基礎 ― データ型（C,Fortranとの比較）</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（５）要素の参照.html"
                >Numpyの基礎 ― 要素の取り出し方</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（６）ブロードキャスト.html"
                >Numpyの基礎 ― ブロードキャスト</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（７）便利なライブラリ群.html"
                >Numpyの基礎 ― 線形代数やフーリエ変換</a
              >
            </p>
            <p>
              <a href="/html/基礎編/Numpyの基礎（８）ファイル入出力.html"
                >Numpyの基礎 ― 様々な形式に対応したファイル入出力</a
              >
            </p>
            <p>
              <a href="/html/基礎編/ファイル読み込み.html">ファイル読み込み</a>
            </p>
            <p>
              <a href="/html/基礎編/文字列操作（１）str.format.html"
                >文字列操作 ― 数値を文字列にフォーマットする</a
              >
            </p>
            <p>
              <a href="/html/基礎編/文字列操作（２）strやファイル読み込み.html"
                >文字列操作 ― 文字列に関数を適用する</a
              >
            </p>
            <p>
              <a href="/html/基礎編/読みやすいPythonコードを書こう.html"
                >読みやすいPythonコードを書こう</a
              >
            </p>
          </div>
        </div>
        <div class="w3-half w3-padding-small w3-container">
          <h2 class="w3-xxlarge w3-padding-small w3-orange">応用編</h2>
          <div class="w3-row-padding bottom-links">
            <p><a href="/html/応用編/Animation.html">Animation</a></p>
            <p>
              <a href="/html/応用編/Fortran, C言語 との連携.html"
                >Fortran, C言語 との連携</a
              >
            </p>
            <p>
              <a href="/html/応用編/Pandas―データ分析（１）Series.html"
                >Pandas ― データ分析（１）時系列などをうまく扱えるようにする</a
              >
            </p>
            <p>
              <a href="/html/応用編/Pandas―データ分析（２）DataFrame.html"
                >Pandas ―
                データ分析（２）複数の列を持った表形式でデータを格納する</a
              >
            </p>
            <p>
              <a href="/html/応用編/Pandas―データ分析（３）GroupBy.html"
                >Pandas ― データ分析（３）データを分割し、個別に集計する</a
              >
            </p>
            <p>
              <a href="/html/応用編/Pandas―データ分析（４）ファイル入出力.html"
                >Pandas ― データ分析（４）高度なファイル入出力</a
              >
            </p>
            <p>
              <a
                href="/html/応用編/Pandas―データ分析（５）応用：都道府県別人口推移.html"
                >Pandas ― データ分析（５）応用：都道府県別人口推移</a
              >
            </p>
            <p>
              <a
                href="/html/応用編/Seaborn ― matplotlib をより美しく、使いやすく.html"
                >Seaborn ― matplotlib をより美しく、使いやすく</a
              >
            </p>
            <p>
              <a href="/html/応用編/shやBashの代わりにPythonを使う.html"
                >shやBashの代わりにPythonを使う</a
              >
            </p>
            <p>
              <a href="/html/応用編/SymPyー代数演算（１）使い方.html"
                >SymPy ― 代数演算（１）文字を文字のまま計算する</a
              >
            </p>
            <p>
              <a href="/html/応用編/SymPyー代数演算（２）応用：二重振り子.html"
                >SymPy ―
                代数演算（２）応用：ラグランジアンから運動方程式を求めて二重振り子を解く</a
              >
            </p>
          </div>
        </div>
      </div>

      <div class="footer-button-container">
        <div class="w3-panel w3-center">
          <h4><a class="w3-button w3-black" href="/">トップページに戻る</a></h4>
        </div>
      </div>
  </body>
</html>